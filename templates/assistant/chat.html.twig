{% extends 'base.html.twig' %}

{% block title %}Assistant{% endblock %}

{% block body %}
<div
  class="d-flex flex-column vh-100"
  data-controller="assistant-chat"
  data-assistant-chat-history-url-value="/assistant/history"
  data-assistant-chat-message-url-value="/assistant/message"
  data-assistant-chat-transcribe-url-value="/api/ai/transcribe"
  data-assistant-chat-confirm-url-value="/assistant/confirm"
>
  {# Zone messages #}
  <div
    class="flex-grow-1 overflow-auto p-3"
    data-assistant-chat-target="messages"
    style="background:#f6f7f8;"
  >
    {# messages injectÃ©s en JS #}
  </div>

  {# Barre de saisie #}
  <div class="border-top p-2 bg-body">
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        placeholder="Ã‰cris un messageâ€¦"
        autocomplete="off"
        data-assistant-chat-target="input"
        data-action="keydown.enter->assistant-chat#send"
      />

      <button
        class="btn btn-outline-secondary"
        type="button"
        data-assistant-chat-target="micButton"
        data-action="click->assistant-chat#toggleMic"
        aria-label="Micro"
        title="Dicter"
      >
        ğŸ™ï¸
      </button>

      <button
        class="btn btn-primary"
        type="button"
        data-assistant-chat-target="sendButton"
        data-action="click->assistant-chat#send"
        aria-label="Envoyer"
        title="Envoyer"
      >
        â¤
      </button>
    </div>

    <div
      class="small text-muted mt-1"
      data-assistant-chat-target="status"
    ></div>
  </div>
</div>
{% endblock %}
